{{ define "telegram.message" }}
{{ if eq .Status "firing" }}{{ if eq .GroupLabels.severity "critical" }}ğŸš¨ *CRITICAL*{{ else if eq .GroupLabels.severity "high" }}âš ï¸ *HIGH*{{ else if eq .GroupLabels.severity "medium" }}â„¹ï¸ *MEDIUM*{{ else }}ğŸ”” *LOW*{{ end }}{{ else }}âœ… *RESOLVED*{{ end }}

*Alert:* {{ .GroupLabels.alertname }}
*Service:* {{ .GroupLabels.service }}
*Instance:* {{ .GroupLabels.instance }}

{{ range .Alerts }}
ğŸ“‹ {{ .Annotations.summary }}
{{ end }}

ğŸ”¥ Firing: {{ .Alerts.Firing | len }} | âœ… Resolved: {{ .Alerts.Resolved | len }}

{{ range .Alerts }}{{ if .Annotations.dashboard_url }}ğŸ“Š [Dashboard]({{ .Annotations.dashboard_url }}){{ end }}{{ end }}
{{ end }}

{{ define "telegram.short" }}
{{ if eq .Status "firing" }}{{ if eq .GroupLabels.severity "critical" }}ğŸš¨{{ else if eq .GroupLabels.severity "high" }}âš ï¸{{ else }}â„¹ï¸{{ end }}{{ else }}âœ…{{ end }} {{ .GroupLabels.alertname }} | {{ .GroupLabels.service }} | {{ .Alerts.Firing | len }} firing
{{ end }}

{{ define "telegram.oncall" }}
ğŸ†˜ *ON-CALL ALERT*

{{ if eq .GroupLabels.severity "critical" }}ğŸš¨ *CRITICAL*{{ else }}âš ï¸ *HIGH*{{ end }} - {{ .GroupLabels.alertname }}

*Service:* `{{ .GroupLabels.service }}`
*Instance:* `{{ .GroupLabels.instance }}`

{{ range .Alerts }}
> {{ .Annotations.summary }}
{{ end }}

â° Started: {{ (index .Alerts 0).StartsAt.Format "15:04:05" }}

{{ range .Alerts }}{{ if .Annotations.dashboard_url }}[ğŸ“Š View Dashboard]({{ .Annotations.dashboard_url }}){{ end }}{{ end }}
{{ end }}
