{{ define "discord.embed" }}
{
  "content": "{{ if eq .Status "firing" }}{{ if eq .GroupLabels.severity "critical" }}ðŸš¨ **CRITICAL ALERT**{{ else if eq .GroupLabels.severity "high" }}âš ï¸ **HIGH ALERT**{{ else if eq .GroupLabels.severity "medium" }}â„¹ï¸ **MEDIUM ALERT**{{ else }}ðŸŸ¢ **LOW ALERT**{{ end }}{{ else }}âœ… **RESOLVED**{{ end }}",
  "embeds": [
    {
      "title": "{{ .GroupLabels.alertname }}",
      "description": "{{ range .Alerts }}{{ .Annotations.summary }}\n{{ .Annotations.description }}{{ end }}",
      "color": {{ if eq .Status "resolved" }}3066993{{ else if eq .GroupLabels.severity "critical" }}15158332{{ else if eq .GroupLabels.severity "high" }}15105570{{ else if eq .GroupLabels.severity "medium" }}16776960{{ else }}3447003{{ end }},
      "fields": [
        {
          "name": "ðŸ·ï¸ Severity",
          "value": "{{ .GroupLabels.severity | toUpper }}",
          "inline": true
        },
        {
          "name": "ðŸ”§ Service",
          "value": "{{ .GroupLabels.service }}",
          "inline": true
        },
        {
          "name": "ðŸ“¡ Instance",
          "value": "{{ .GroupLabels.instance }}",
          "inline": true
        },
        {
          "name": "ðŸ“Š Status",
          "value": "ðŸ”¥ Firing: {{ .Alerts.Firing | len }} | âœ… Resolved: {{ .Alerts.Resolved | len }}",
          "inline": false
        }
      ],
      "footer": {
        "text": "CannaConverter Alert System"
      },
      "timestamp": "{{ (index .Alerts 0).StartsAt.Format "2006-01-02T15:04:05Z07:00" }}"
    }
  ]
}
{{ end }}

{{ define "discord.message" }}
{{ if eq .Status "firing" }}{{ if eq .GroupLabels.severity "critical" }}ðŸš¨{{ else if eq .GroupLabels.severity "high" }}âš ï¸{{ else if eq .GroupLabels.severity "medium" }}â„¹ï¸{{ else }}ðŸŸ¢{{ end }}{{ else }}âœ…{{ end }} **[{{ .Status | toUpper }}]** {{ .GroupLabels.alertname }}

**Severity:** {{ .GroupLabels.severity | toUpper }}
**Service:** {{ .GroupLabels.service }}

{{ range .Alerts }}
> {{ .Annotations.summary }}
{{ end }}

ðŸ“Š Firing: {{ .Alerts.Firing | len }} | Resolved: {{ .Alerts.Resolved | len }}
{{ end }}
