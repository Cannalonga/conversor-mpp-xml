# =====================================================
# CONVERSOR MPP XML - ARQUIVO DE EXEMPLO
# =====================================================
# Este arquivo é SEGURO para versionamento (git)
# Não contém credenciais reais
# 
# INSTRUÇÕES:
# 1. Copie este arquivo para .env
# 2. Preencha com suas credenciais reais
# 3. NUNCA commite .env no git
# 4. Adicione .env ao .gitignore (já feito)

# ============ SERVIDOR ============
PORT=3001
NODE_ENV=production
HOST=0.0.0.0

# ============ BANCO DE DADOS ============
# Unified DATABASE_URL (same DB for backend and frontend/NextAuth)
# SQLite (desenvolvimento): file:./data/dev.db
# PostgreSQL (produção): postgresql://user:pass@host:5432/db
DATABASE_URL=file:./data/dev.db

# ============ NEXTAUTH / FRONTEND ============
# These are also used by frontend
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=changeme_dev_replace_with_openssl_rand_base64_32

# Backend proxy (frontend uses this via Next.js rewrites)
NEXT_PUBLIC_BACKEND_PROXY=http://127.0.0.1:3001

# ============ SEGURANÇA ============
# JWT_SECRET_KEY: Gerar com 64 bytes hex
# Comando: node -e "console.log(require('crypto').randomBytes(64).toString('hex'))"
JWT_SECRET_KEY=YOUR_64_HEX_CHARS_HERE_ROTATE_IN_PROD
JWT_EXPIRATION_HOURS=24

# SESSION_SECRET: Gerar com 32 bytes hex
SESSION_SECRET=YOUR_32_HEX_CHARS_HERE

# ENCRYPTION_KEY: Gerar com 32 bytes hex
ENCRYPTION_KEY=YOUR_32_HEX_CHARS_HERE

# ============ ADMIN ============
# NUNCA use ADMIN_PASS em plain text!
# Use ADMIN_PASSWORD_HASH com bcrypt (12 rounds)
# Comando para gerar: 
# node -e "const bcrypt=require('bcryptjs'); bcrypt.hash('SUA_SENHA_AQUI',12).then(h=>console.log(h))"
# Exemplo de geração segura:
# 1. Escolha uma senha forte (16+ caracteres)
# 2. Rode o comando acima para gerar o hash
# 3. Cole o hash aqui
ADMIN_USERNAME=seu_usuario_admin_aqui
ADMIN_PASSWORD_HASH=seu_bcrypt_hash_aqui

# ============ MERCADO PAGO ============
# Obtenha credenciais em: https://www.mercadopago.com.br/developers/pt/docs
# Painel: https://www.mercadopago.com.br/developers/panel/app
#
# Para TESTES (Sandbox):
# 1. Crie uma aplicação em "Suas integrações"
# 2. Use as credenciais de TESTE (não as de produção)
# 3. Use cartões de teste: https://www.mercadopago.com.br/developers/pt/docs/checkout-api/additional-content/your-integrations/test/cards
#
# Para PRODUÇÃO:
# 1. Ative credenciais de produção no painel
# 2. Configure webhook URL: https://seu-dominio.com/api/webhooks/mercadopago
#
MP_ACCESS_TOKEN=TEST-0000000000000000-000000-00000000000000000000000000000000-000000000
MP_PUBLIC_KEY=TEST-00000000-0000-0000-0000-000000000000

# URLs do app (usadas para callbacks do MP)
APP_URL=http://localhost:3000
BACKEND_URL=http://localhost:3001

# ============ EMAIL (SMTP) ============
# Exemplo com Gmail:
# 1. Ativar 2-factor authentication em sua conta Google
# 2. Gerar "App Password" em https://myaccount.google.com/apppasswords
# 3. Usar a senha gerada como SMTP_PASSWORD
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=seu_email@gmail.com
SMTP_PASSWORD=sua_senha_app_aqui
SMTP_FROM=noreply@conversor-mpp.com
EMAIL_NOTIFICATIONS_ENABLED=true

# ============ CORS ============
# URLs permitidas para requisições cross-origin
# Separadas por vírgula
CORS_ORIGINS=http://localhost:3000,https://seu-dominio.com.br

# ============ LOGGING ============
# FIX #3: Medium priority - Winston Logger with Daily Rotation
LOG_LEVEL=info
LOG_DIR=./logs
LOG_MAX_SIZE=10m
LOG_MAX_FILES=14d
LOG_DATE_PATTERN=YYYY-MM-DD

# ============ RATE LIMITING ============
# FIX #1: Medium priority - Rate limiter configuration
RATE_LIMIT_GLOBAL=100
RATE_LIMIT_UPLOAD=5

# ============ JOB QUEUE ============
# FIX #4: Medium priority - BullMQ Job timeout (milliseconds)
JOB_TIMEOUT_MS=300000

# ============ UPLOAD ============
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=104857600
MAX_CONCURRENT_CONVERSIONS=5
FILE_RETENTION_HOURS=24
CLEANUP_INTERVAL=3600000
