# ============================================================================
# üîê PRODU√á√ÉO - TEMPLATE COM PLACEHOLDERS APENAS
# ============================================================================
# ‚ö†Ô∏è CR√çTICO: Este arquivo cont√©m APENAS placeholders de configura√ß√£o
# NUNCA coloque credenciais reais em arquivos versionados no Git
#
# USE ESTE ARQUIVO COMO REFER√äNCIA APENAS
# Configure um arquivo .env real na raiz (N√ÉO versionado no Git)
# ============================================================================

# ============================================================================
# 1. APPLICATION SETTINGS (N√ÉO CONT√âM DADOS SENS√çVEIS)
# ============================================================================
NODE_ENV=production
APP_NAME=CannaConvert
APP_VERSION=1.0.0

# ============================================================================
# 2. URLS & ENDPOINTS (COLOQUE VALORES REAIS NO .env)
# ============================================================================
NEXT_PUBLIC_APP_URL=https://YOUR_PRODUCTION_DOMAIN
FRONTEND_URL=https://YOUR_PRODUCTION_DOMAIN
BACKEND_URL=http://localhost:3001
MPP_CONVERTER_URL=http://localhost:8080

# ============================================================================
# 3. AUTHENTICATION - TODOS OS SECRETS V√ÉO NO .env (N√ÉO AQUI)
# ============================================================================
# Gerar: openssl rand -base64 32
NEXTAUTH_URL=https://YOUR_PRODUCTION_DOMAIN
NEXTAUTH_SECRET=PLACEHOLDER_GENERATED_SECRET
NEXTAUTH_SESSION_MAX_AGE=2592000
NEXTAUTH_SESSION_UPDATE_AGE=86400

# ============================================================================
# 4. DATABASE - CREDENCIAIS V√ÉO NO .env (N√ÉO AQUI)
# ============================================================================
# Nunca coloque credenciais em versionamento
# Use gerenciador de secrets (AWS Secrets Manager, Vault, etc)
DATABASE_URL=PLACEHOLDER_DATABASE_URL
DIRECT_URL=PLACEHOLDER_DIRECT_DATABASE_URL
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_CONNECTION_TIMEOUT=30000

# ============================================================================
# 5. PAYMENT GATEWAY - TODOS OS SECRETS V√ÉO NO .env
# ============================================================================
MERCADO_PAGO_ACCESS_TOKEN=PLACEHOLDER_TOKEN
NEXT_PUBLIC_MERCADO_PAGO_PUBLIC_KEY=PLACEHOLDER_KEY
MERCADO_PAGO_WEBHOOK_SECRET=PLACEHOLDER_SECRET
MERCADO_PAGO_NOTIFICATION_URL=https://YOUR_PRODUCTION_DOMAIN/api/webhooks/mercadopago
PIX_PRICE_CENTS=1000

# ============================================================================
# 6. STRIPE (OPCIONAL) - SECRETS V√ÉO NO .env
# ============================================================================
STRIPE_SECRET_KEY=PLACEHOLDER_SECRET_KEY
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=PLACEHOLDER_PUBLISHABLE_KEY
STRIPE_WEBHOOK_SECRET=PLACEHOLDER_WEBHOOK_SECRET

# ============================================================================
# 7. INTERNAL API SECURITY - SECRETS V√ÉO NO .env
# ============================================================================
SECRET_API_KEY=PLACEHOLDER_API_KEY
ADMIN_API_KEY=PLACEHOLDER_ADMIN_KEY
JWT_SECRET=PLACEHOLDER_JWT_SECRET

# ============================================================================
# 8. REDIS - CREDENCIAIS V√ÉO NO .env
# ============================================================================
REDIS_URL=PLACEHOLDER_REDIS_URL
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=PLACEHOLDER_PASSWORD
REDIS_DB=0
REDIS_KEY_PREFIX=cannaconvert:prod:

# ============================================================================
# 9. EMAIL (OPCIONAL) - CREDENCIAIS V√ÉO NO .env
# ============================================================================
SMTP_HOST=PLACEHOLDER_SMTP_HOST
SMTP_PORT=587
SMTP_USER=PLACEHOLDER_EMAIL
SMTP_PASSWORD=PLACEHOLDER_PASSWORD
SMTP_FROM=noreply@YOUR_DOMAIN

# ============================================================================
# 10. LOGGING & MONITORING - Configura√ß√µes p√∫blicas
# ============================================================================
LOG_LEVEL=info
SENTRY_DSN=PLACEHOLDER_SENTRY_DSN

# ============================================================================
# 11. SECURITY
# ============================================================================
CORS_ALLOWED_ORIGINS=https://YOUR_PRODUCTION_DOMAIN
ENABLE_XXE_PROTECTION=true
ENABLE_FILE_SCANNING=true
HSTS_MAX_AGE=31536000
COOKIE_SECURE=true

# ============================================================================
# 12. ARQUIVOS
# ============================================================================
MAX_FILE_SIZE=52428800
UPLOAD_DIR=./uploads
TEMP_DIR=./temp

# ============================================================================
# 13. DOCKER & PORT
# ============================================================================
PORT=3000
BACKEND_PORT=3001
SHUTDOWN_TIMEOUT=30000

# ============================================================================
# ‚ö†Ô∏è  IMPORTANTE: INSTRU√á√ïES DE SEGURAN√áA
# ============================================================================
# 
# 1. NUNCA coloque credenciais reais neste arquivo
# 2. NUNCA commite arquivo .env em git (est√° em .gitignore)
# 3. Use arquivo .env local na raiz do projeto
# 4. Em produ√ß√£o, use Secret Manager:
#    - AWS Secrets Manager
#    - HashiCorp Vault
#    - Azure Key Vault
#    - Google Secret Manager
# 5. Implemente rota√ß√£o autom√°tica de secrets
# 6. Audite logs regularmente
# 7. Use certificados SSL/TLS v√°lidos
# 8. Configure webhooks de seguran√ßa
# 9. Monitore falhas de autentica√ß√£o
# 10. Fa√ßa backup de credenciais em local seguro (n√£o no reposit√≥rio)
#
# ============================================================================


# Redis database index (0-15)
REDIS_DB=0

# Redis key prefix (for namespacing)
REDIS_KEY_PREFIX=cannaconvert:prod:

# ----------------------------------------------------------------------------
# 9. RATE LIMITING
# ----------------------------------------------------------------------------

# Enable rate limiting (recommended for production)
RATE_LIMIT_ENABLED=true

# Global rate limit (requests per window)
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WINDOW_MS=60000

# API rate limit (stricter)
RATE_LIMIT_API_MAX=50
RATE_LIMIT_API_WINDOW_MS=60000

# Auth rate limit (very strict to prevent brute force)
RATE_LIMIT_AUTH_MAX=5
RATE_LIMIT_AUTH_WINDOW_MS=300000

# Conversion rate limit (per user)
RATE_LIMIT_CONVERSION_MAX=10
RATE_LIMIT_CONVERSION_WINDOW_MS=3600000

# ----------------------------------------------------------------------------
# 10. SECURITY HEADERS
# ----------------------------------------------------------------------------

# Content Security Policy - adjust according to your needs
CSP_DIRECTIVES="default-src 'self'; script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://pagead2.googlesyndication.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https: blob:; connect-src 'self' https://api.mercadopago.com https://www.google-analytics.com; frame-src 'self' https://www.mercadopago.com.br https://pagead2.googlesyndication.com"

# HSTS (HTTP Strict Transport Security)
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# CORS allowed origins (comma-separated)
CORS_ALLOWED_ORIGINS=<CHANGE_ME_PRODUCTION_DOMAIN>

# Cookie settings
COOKIE_SECURE=true
COOKIE_SAME_SITE=lax
COOKIE_DOMAIN=<CHANGE_ME_DOMAIN_WITHOUT_PROTOCOL>

# ----------------------------------------------------------------------------
# 11. FILE UPLOAD & STORAGE
# ----------------------------------------------------------------------------

# Maximum file size (in bytes) - 50MB
MAX_FILE_SIZE=52428800

# Allowed file extensions (comma-separated)
ALLOWED_EXTENSIONS=.mpp,.xml,.pdf,.doc,.docx,.xls,.xlsx,.jpg,.jpeg,.png,.webp,.mp4,.mov

# Upload directory (relative to project root)
UPLOAD_DIR=./uploads

# Temp directory for processing
TEMP_DIR=./temp

# Storage type: local | s3 | gcs
STORAGE_TYPE=local

# S3 Configuration (if STORAGE_TYPE=s3)
AWS_ACCESS_KEY_ID=<CHANGE_ME_IF_USING_S3>
AWS_SECRET_ACCESS_KEY=<CHANGE_ME_IF_USING_S3>
AWS_REGION=sa-east-1
AWS_S3_BUCKET=<CHANGE_ME_IF_USING_S3>

# ----------------------------------------------------------------------------
# 12. LOGGING & MONITORING
# ----------------------------------------------------------------------------

# Log level: error | warn | info | debug
LOG_LEVEL=info

# Log format: json | pretty
LOG_FORMAT=json

# Log destination: console | file | both
LOG_DESTINATION=both

# Log file path
LOG_FILE_PATH=./logs/app.log

# Log rotation
LOG_MAX_SIZE=10m
LOG_MAX_FILES=14

# Enable request logging
LOG_REQUESTS=true

# Sentry DSN for error tracking (optional but recommended)
SENTRY_DSN=<CHANGE_ME_SENTRY_DSN>

# Sentry environment
SENTRY_ENVIRONMENT=production

# Sentry traces sample rate (0.0 to 1.0)
SENTRY_TRACES_SAMPLE_RATE=0.1

# ----------------------------------------------------------------------------
# 13. EMAIL CONFIGURATION (Optional)
# ----------------------------------------------------------------------------

# SMTP Configuration
SMTP_HOST=<CHANGE_ME_SMTP_HOST>
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=<CHANGE_ME_SMTP_USER>
SMTP_PASSWORD=<CHANGE_ME_SMTP_PASSWORD>

# Email sender
EMAIL_FROM=noreply@<CHANGE_ME_DOMAIN>
EMAIL_FROM_NAME=CannaConvert

# ----------------------------------------------------------------------------
# 14. GOOGLE ADS / ANALYTICS (Optional)
# ----------------------------------------------------------------------------

# Google Analytics 4 Measurement ID
NEXT_PUBLIC_GA4_MEASUREMENT_ID=<CHANGE_ME_GA4_ID>

# Google AdSense Publisher ID
NEXT_PUBLIC_ADSENSE_PUBLISHER_ID=<CHANGE_ME_ADSENSE_ID>

# Enable/disable ads globally
NEXT_PUBLIC_ADS_ENABLED=true

# ----------------------------------------------------------------------------
# 15. FEATURE FLAGS
# ----------------------------------------------------------------------------

# Enable demo mode (for testing without real payments)
ENABLE_DEMO_MODE=false

# Enable maintenance mode
ENABLE_MAINTENANCE_MODE=false

# Maintenance message (when maintenance mode is on)
MAINTENANCE_MESSAGE="Sistema em manuten√ß√£o. Voltamos em breve!"

# Enable new user registration
ENABLE_REGISTRATION=true

# Enable social login
ENABLE_SOCIAL_LOGIN=false

# ----------------------------------------------------------------------------
# 16. DOCKER & DEPLOYMENT
# ----------------------------------------------------------------------------

# Container port (internal)
PORT=3000

# Backend container port
BACKEND_PORT=3001

# MPP Converter port
MPP_CONVERTER_PORT=8080

# Health check endpoint
HEALTH_CHECK_PATH=/api/health

# Graceful shutdown timeout (ms)
SHUTDOWN_TIMEOUT=30000

# ----------------------------------------------------------------------------
# 17. BACKUP CONFIGURATION
# ----------------------------------------------------------------------------

# Database backup schedule (cron format)
BACKUP_SCHEDULE="0 2 * * *"

# Backup retention days
BACKUP_RETENTION_DAYS=30

# Backup storage path
BACKUP_PATH=/backups

# ----------------------------------------------------------------------------
# END OF CONFIGURATION
# ----------------------------------------------------------------------------
# 
# CHECKLIST BEFORE DEPLOY:
# [ ] All <CHANGE_ME> values replaced with actual values
# [ ] Database migrated and seeded
# [ ] SSL certificate configured
# [ ] DNS pointing to server
# [ ] Firewall configured (ports 80, 443 only)
# [ ] Mercado Pago webhook configured
# [ ] Monitoring and alerting set up
# [ ] Backup strategy in place
# [ ] Rollback plan documented
# [ ] Load testing completed
#
# ============================================================================
